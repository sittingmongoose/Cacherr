# Cacherr - Complete Environment Configuration Example
# Copy this file to .env and customize for your setup

# =============================================================================
# PLEX CONFIGURATION (REQUIRED)
# =============================================================================
PLEX_URL=http://your-plex-server:32400
PLEX_TOKEN=your-plex-token-here

# =============================================================================
# PATH CONFIGURATION (CRITICAL FOR UNRAID)
# =============================================================================

# Main plex source mapping
PLEX_SOURCE=/plexsource              # What Plex sees internally
REAL_SOURCE=/mediasource             # Where files actually are on Unraid

# Cache configuration
CACHE_DESTINATION=/cache              # Cache directory for media files

# Application configuration directory
CONFIG_DIR=/config                    # Where app stores config, logs, and data

# Additional source mappings (OPTIONAL)
# IMPORTANT: Count must match between ADDITIONAL_SOURCES and ADDITIONAL_PLEX_SOURCES
# Use space-separated values for multiple sources (NOT comma-separated)
ADDITIONAL_SOURCES=/mediasource2 /mediasource3 /mediasource4
ADDITIONAL_PLEX_SOURCES=/plexsource2 /plexsource3 /plexsource4

# =============================================================================
# MEDIA SETTINGS
# =============================================================================
NUMBER_EPISODES=5                     # Number of episodes to cache per show
DAYS_TO_MONITOR=99                    # How many days back to monitor

# Watchlist settings
WATCHLIST_TOGGLE=true                 # Enable watchlist caching
WATCHLIST_EPISODES=1                  # Episodes per watchlist item
WATCHLIST_CACHE_EXPIRY=6             # Hours to keep in cache

# Watched content settings
WATCHED_MOVE=true                     # Move watched content to array
WATCHED_CACHE_EXPIRY=48              # Hours to keep watched content in cache

# User settings
USERS_TOGGLE=true                     # Enable multi-user support
EXIT_IF_ACTIVE_SESSION=false          # Exit if Plex has active sessions

# =============================================================================
# CACHE BEHAVIOR SETTINGS
# =============================================================================
COPY_TO_CACHE=true                    # Copy instead of move (preserves originals) 
DELETE_FROM_CACHE_WHEN_DONE=true      # Delete from cache when done
# Note: Symlinks/hardlinks are always used for Plex compatibility

# =============================================================================
# PERFORMANCE SETTINGS
# =============================================================================
MAX_CONCURRENT_MOVES_CACHE=5          # Max concurrent moves to cache
MAX_CONCURRENT_MOVES_ARRAY=2          # Max concurrent moves to array
MAX_CONCURRENT_LOCAL_TRANSFERS=5      # Max concurrent local transfers
MAX_CONCURRENT_NETWORK_TRANSFERS=2    # Max concurrent network transfers

# =============================================================================
# REAL-TIME WATCHING SETTINGS
# =============================================================================
REAL_TIME_WATCH_ENABLED=false         # Enable real-time Plex watching
REAL_TIME_WATCH_CHECK_INTERVAL=30     # Check interval in seconds
REAL_TIME_WATCH_AUTO_CACHE_ON_WATCH=true
REAL_TIME_WATCH_CACHE_ON_COMPLETE=true
REAL_TIME_WATCH_RESPECT_EXISTING_RULES=true
REAL_TIME_WATCH_MAX_CONCURRENT_WATCHES=10
REAL_TIME_WATCH_REMOVE_FROM_CACHE_AFTER_HOURS=24
REAL_TIME_WATCH_RESPECT_OTHER_USERS_WATCHLISTS=true
REAL_TIME_WATCH_EXCLUDE_INACTIVE_USERS_DAYS=30

# =============================================================================
# TRAKT.TV INTEGRATION (OPTIONAL)
# =============================================================================
TRAKT_ENABLED=false                   # Enable Trakt.tv integration
TRAKT_CLIENT_ID=your_trakt_client_id
TRAKT_CLIENT_SECRET=your_trakt_client_secret
TRAKT_TRENDING_MOVIES_COUNT=10        # Number of trending movies to cache
TRAKT_CHECK_INTERVAL=3600             # Check interval in seconds

# =============================================================================
# TEST MODE SETTINGS
# =============================================================================
TEST_MODE=false                        # Enable test mode
TEST_SHOW_FILE_SIZES=true             # Show file sizes in test mode
TEST_SHOW_TOTAL_SIZE=true             # Show total size in test mode
# Note: Test mode is always safe - files are never moved during testing

# =============================================================================
# WEB INTERFACE SETTINGS
# =============================================================================
WEB_HOST=0.0.0.0                     # Web interface host binding (0.0.0.0 for all interfaces)
PORT=5445                             # Web interface port (container internal)
WEB_PORT=5445                         # Web interface port (container internal - matches PORT)
DEBUG=false                           # Enable debug mode

# =============================================================================
# CONTAINER CONFIGURATION
# =============================================================================
TZ=America/New_York                   # Timezone (America/New_York for EST/EDT)
LOG_LEVEL=INFO                        # Logging level (DEBUG, INFO, WARNING, ERROR)
ENABLE_SCHEDULER=false                # Enable background scheduler

# =============================================================================
# NOTIFICATION SETTINGS (OPTIONAL)
# =============================================================================
WEBHOOK_URL=                          # Webhook URL for notifications
NOTIFICATION_TYPE=webhook             # Notification type

# =============================================================================
# EXAMPLE CONFIGURATIONS
# =============================================================================

# Example 1: Single media share
# PLEX_SOURCE=/plexsource
# REAL_SOURCE=/mediasource
# CONFIG_DIR=/config
# ADDITIONAL_SOURCES=
# ADDITIONAL_PLEX_SOURCES=

# Example 2: Main share + remote NAS
# PLEX_SOURCE=/plexsource
# REAL_SOURCE=/mediasource
# CONFIG_DIR=/config
# ADDITIONAL_SOURCES=/mediasource2
# ADDITIONAL_PLEX_SOURCES=/plexsource2

# Example 3: Main share + multiple sources
# PLEX_SOURCE=/plexsource
# REAL_SOURCE=/mediasource
# CONFIG_DIR=/config
# ADDITIONAL_SOURCES=/mediasource2 /mediasource3 /mediasource4
# ADDITIONAL_PLEX_SOURCES=/plexsource2 /plexsource3 /plexsource4

# Example 4: Custom config location
# PLEX_SOURCE=/plexsource
# REAL_SOURCE=/mediasource
# CONFIG_DIR=/config  # Store config in container /config
# ADDITIONAL_SOURCES=
# ADDITIONAL_PLEX_SOURCES=

# =============================================================================
# DIRECTORY STRUCTURE
# =============================================================================
# The application now uses a single /config directory structure:
# /config/
# ├── logs/          # Application logs
# ├── data/          # Application data and cache info
# └── config/        # Configuration files and settings
#
# This simplifies volume management and provides better organization.
# All persistent data is stored in the CONFIG_DIR location.

# =============================================================================
# TROUBLESHOOTING NOTES
# =============================================================================
# 1. Ensure PLEX_SOURCE matches what Plex sees internally
# 2. Ensure REAL_SOURCE points to actual filesystem paths
# 3. Count of ADDITIONAL_SOURCES must equal ADDITIONAL_PLEX_SOURCES
# 4. ADDITIONAL_SOURCES and ADDITIONAL_PLEX_SOURCES use space-separated values
# 5. Test with a few files before running full operations
# 6. Check logs for path conversion errors
# 7. Verify all paths are accessible to the container
# 8. Ensure CONFIG_DIR is writable and accessible
