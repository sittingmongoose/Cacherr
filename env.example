# PlexCacheUltra - Complete Environment Configuration Example
# Copy this file to .env and customize for your setup

# =============================================================================
# PLEX CONFIGURATION (REQUIRED)
# =============================================================================
PLEX_URL=http://your-plex-server:32400
PLEX_TOKEN=your-plex-token-here

# =============================================================================
# PATH CONFIGURATION (CRITICAL FOR UNRAID)
# =============================================================================

# Main plex source mapping
PLEX_SOURCE=/media                    # What Plex sees internally
REAL_SOURCE=/mnt/user                 # Where files actually are on Unraid

# Cache configuration
CACHE_DESTINATION=/mnt/cache/media    # Cache directory for media files

# Application configuration directory
CONFIG_DIR=/mnt/user/appdata/plexcacheultra/config  # Where app stores config, logs, and data

# Additional source mappings (OPTIONAL)
# IMPORTANT: Count must match between ADDITIONAL_SOURCES and ADDITIONAL_PLEX_SOURCES
ADDITIONAL_SOURCES=/mnt/remote_share,/mnt/nas_media,/mnt/backup_media
ADDITIONAL_PLEX_SOURCES=/media2,/media3,/media4

# =============================================================================
# MEDIA SETTINGS
# =============================================================================
NUMBER_EPISODES=5                     # Number of episodes to cache per show
DAYS_TO_MONITOR=99                    # How many days back to monitor

# Watchlist settings
WATCHLIST_TOGGLE=true                 # Enable watchlist caching
WATCHLIST_EPISODES=1                  # Episodes per watchlist item
WATCHLIST_CACHE_EXPIRY=6             # Hours to keep in cache

# Watched content settings
WATCHED_MOVE=true                     # Move watched content to array
WATCHED_CACHE_EXPIRY=48              # Hours to keep watched content in cache

# User settings
USERS_TOGGLE=true                     # Enable multi-user support
EXIT_IF_ACTIVE_SESSION=false          # Exit if Plex has active sessions

# =============================================================================
# CACHE BEHAVIOR SETTINGS
# =============================================================================
COPY_TO_CACHE=false                   # Copy instead of move (preserves originals)
DELETE_FROM_CACHE_WHEN_DONE=true      # Delete from cache when done
USE_SYMLINKS_FOR_CACHE=true          # Create symlinks for Plex
MOVE_WITH_SYMLINKS=false             # Move + symlink mode (hybrid)

# =============================================================================
# PERFORMANCE SETTINGS
# =============================================================================
MAX_CONCURRENT_MOVES_CACHE=5          # Max concurrent moves to cache
MAX_CONCURRENT_MOVES_ARRAY=2          # Max concurrent moves to array
MAX_CONCURRENT_LOCAL_TRANSFERS=5      # Max concurrent local transfers
MAX_CONCURRENT_NETWORK_TRANSFERS=2    # Max concurrent network transfers

# =============================================================================
# REAL-TIME WATCHING SETTINGS
# =============================================================================
REAL_TIME_WATCH_ENABLED=false         # Enable real-time Plex watching
REAL_TIME_WATCH_CHECK_INTERVAL=30     # Check interval in seconds
REAL_TIME_WATCH_AUTO_CACHE_ON_WATCH=true
REAL_TIME_WATCH_CACHE_ON_COMPLETE=true
REAL_TIME_WATCH_RESPECT_EXISTING_RULES=true
REAL_TIME_WATCH_MAX_CONCURRENT_WATCHES=10
REAL_TIME_WATCH_REMOVE_FROM_CACHE_AFTER_HOURS=24
REAL_TIME_WATCH_RESPECT_OTHER_USERS_WATCHLISTS=true
REAL_TIME_WATCH_EXCLUDE_INACTIVE_USERS_DAYS=30

# =============================================================================
# TRAKT.TV INTEGRATION (OPTIONAL)
# =============================================================================
TRAKT_ENABLED=false                   # Enable Trakt.tv integration
TRAKT_CLIENT_ID=your_trakt_client_id
TRAKT_CLIENT_SECRET=your_trakt_client_secret
TRAKT_TRENDING_MOVIES_COUNT=10        # Number of trending movies to cache
TRAKT_CHECK_INTERVAL=3600             # Check interval in seconds

# =============================================================================
# TEST MODE SETTINGS
# =============================================================================
TEST_MODE=false                        # Enable test mode
TEST_SHOW_FILE_SIZES=true             # Show file sizes in test mode
TEST_SHOW_TOTAL_SIZE=true             # Show total size in test mode
TEST_DRY_RUN=true                     # Dry run in test mode

# =============================================================================
# WEB INTERFACE SETTINGS
# =============================================================================
PORT=5443                             # Web interface port
DEBUG=false                           # Enable debug mode
LOG_LEVEL=INFO                        # Logging level (DEBUG, INFO, WARNING, ERROR)
ENABLE_SCHEDULER=false                # Enable background scheduler

# =============================================================================
# NOTIFICATION SETTINGS (OPTIONAL)
# =============================================================================
WEBHOOK_URL=                          # Webhook URL for notifications
NOTIFICATION_TYPE=webhook             # Notification type

# =============================================================================
# EXAMPLE CONFIGURATIONS
# =============================================================================

# Example 1: Single media share
# PLEX_SOURCE=/media
# REAL_SOURCE=/mnt/user
# CONFIG_DIR=/mnt/user/appdata/plexcacheultra/config
# ADDITIONAL_SOURCES=
# ADDITIONAL_PLEX_SOURCES=

# Example 2: Main share + remote NAS
# PLEX_SOURCE=/media
# REAL_SOURCE=/mnt/user
# CONFIG_DIR=/mnt/user/appdata/plexcacheultra/config
# ADDITIONAL_SOURCES=/mnt/remote_nas
# ADDITIONAL_PLEX_SOURCES=/media2

# Example 3: Main share + multiple sources
# PLEX_SOURCE=/media
# REAL_SOURCE=/mnt/user
# CONFIG_DIR=/mnt/user/appdata/plexcacheultra/config
# ADDITIONAL_SOURCES=/mnt/remote_nas,/mnt/backup_media,/mnt/archive
# ADDITIONAL_PLEX_SOURCES=/media2,/media3,/media4

# Example 4: Custom config location
# PLEX_SOURCE=/media
# REAL_SOURCE=/mnt/user
# CONFIG_DIR=/mnt/cache/appdata/plexcacheultra/config  # Store config on cache drive
# ADDITIONAL_SOURCES=
# ADDITIONAL_PLEX_SOURCES=

# =============================================================================
# DIRECTORY STRUCTURE
# =============================================================================
# The application now uses a single /config directory structure:
# /app/config/
# ├── logs/          # Application logs
# ├── data/          # Application data and cache info
# └── config/        # Configuration files and settings
#
# This simplifies volume management and provides better organization.
# All persistent data is stored in the CONFIG_DIR location.

# =============================================================================
# TROUBLESHOOTING NOTES
# =============================================================================
# 1. Ensure PLEX_SOURCE matches what Plex sees internally
# 2. Ensure REAL_SOURCE points to actual filesystem paths
# 3. Count of ADDITIONAL_SOURCES must equal ADDITIONAL_PLEX_SOURCES
# 4. Test with a few files before running full operations
# 5. Check logs for path conversion errors
# 6. Verify all paths are accessible to the container
# 7. Ensure CONFIG_DIR is writable and accessible
